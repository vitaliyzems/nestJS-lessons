<h1>Создание комментария</h1>
<form class="mb-4">
  <div class="mb-3">
    <label for="messageInput" class="form-label">Сообщение *</label>
    <input type="text" class="form-control" name="message" id="messageInput">
  </div>
  <div class="mb-3">
    <label for="authorInput" class="form-label">Автор *</label>
    <input type="text" class="form-control" name="author" id="authorInput">
  </div>
  <div class="form-group">
    <label for="avatar">Аватар</label>
    <input class="form-control-file" type="file" name="avatar" id="avatar">
  </div>
  <input type="submit" class="btn btn-primary" value="Добавить">
</form>
<script>
  const formEl = document.querySelector('form');
  formEl.addEventListener('submit', async (event) => {
    event.preventDefault();
    const data = new FormData(formEl);
    const url = new URL(document.location.href);
    const newsId = url.pathname.split('/').pop();

    const response = await fetch(`/comments/${newsId}`, {
      method: 'POST',
      body: data
    })
    const result = await response.text();
    if (response.status === 201) {
      window.location = `http://localhost:3000/news/views/${newsId}`;
      return;
    }
    alert(result);
  })
</script>